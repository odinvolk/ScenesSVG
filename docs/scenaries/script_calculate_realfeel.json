{"SCRIPTS":[{"TITLE":"calculate_realfeel","DESCRIPTION":"\u0420\u0430\u0441\u0447\u0435\u0442 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u043a\u0430\u043a \u043e\u0449\u0443\u0449\u0430\u0435\u0442\u0441\u044f\r\n\u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u0441\u0446\u0435\u043d\u044b \u041f\u043e\u0433\u043e\u0434\u0430 \u043e\u0442 OpenWeatherMap\r\nhttp:\/\/majordomo.smartliving.ru\/forum\/viewtopic.php?f=4&t=2950","CODE":"$t = gg('current_weather.temperature'); \/\/ \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430 \u043d\u0430 \u0443\u043b\u0438\u0446\u0435\r\n$h = gg('current_weather.humidity'); \/\/ \u0432\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c \u043d\u0430 \u0443\u043b\u0438\u0446\u0435\r\n$w = gg('current_weather.wind_speed'); \/\/ \u0434\u0430\u043d\u043d\u044b\u0435 \u043e \u0432\u0435\u0442\u0440\u0435 \u0438\u0437 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u0430 OpenWeather\r\n$w=$w*3.6\/1.609;\/\/m\/s -> mph\r\n$tF = $t *1.8+32; \/\/ \u043f\u0435\u0440\u0435\u0432\u043e\u0434 \u0442\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u044b \u0432 Farenheit\r\n\r\nif ($t > 26.6){\r\n \/\/ \u0421\u0447\u0438\u0442\u0430\u0435\u043c HeatIndex \u043f\u043e Rothfusz\r\n $_f=-42.379 + 2.04901523*$tF + 10.14333127*$h - 0.22475541*$tF*$h - 0.00683783*$tF*$tF - 0.05481717*$h*$h + 0.00122874*$tF*$tF*$h + 0.00085282*$tF*$h*$h -0.00000199*$tF*$tF*$h*$h;\r\n   if(($tF<112)&&($h<13)){\r\n   \/\/ If the RH is less than 13% and the temperature is between 80 and 112 degrees F, then the following adjustment is subtracted from HI: \r\n     $_f=$_f-((13-$h)\/4)*sqrt((17-abs($tF-95.))\/17);\r\n   }\r\n   if(($tF<88)&&($h>85)){\r\n    \/\/ On the other hand, if the RH is greater than 85% and the temperature is between 80 and 87 degrees F, then the following adjustment is added to HI:\r\n    \/\/ADJUSTMENT = [(RH-85)\/10] * [(87-T)\/5]\r\n    $_f=$_f+(($h-85)\/10)*((87-$tF)\/5);\r\n   }\r\n}else if ($t <= 10){\r\n \/\/ \u0421\u0447\u0438\u0442\u0430\u0435\u043c \u0444\u0430\u043a\u0442\u043e\u0440 WindChild\r\n $_f = 35.74+(0.6215*$tF)-(35.75*pow($w,0.16))+((0.4275*$tF)*pow($w,0.16));\r\n}else{\r\n \/\/\u0441\u0447\u0438\u0442\u0430\u0435\u043c \u043f\u043e \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u043d\u043e\u0439 \u0444\u043e\u0440\u043c\u0443\u043b\u0435\r\n $_f = 0.5*($tF+61+(($tF-68)*1.2)+($h*0.094));\r\n}\r\n\/\/ \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u043c \u0432 \u0446\u0435\u043b\u044c\u0441\u0438\u0438\r\n $rf = round(($_f-32)\/1.8,0);\r\n\/\/\u0438 \u043f\u0440\u043e\u043f\u0438\u0448\u0435\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\r\nsg(\"current_weather.reelFeel\",$rf);\r\n\/\/ \u0432\u043d\u0435\u0441\u0435\u043c \u0434\u043d\u0438 \u043d\u0435\u0434\u0435\u043b\u0438 \u043f\u0440\u043e\u0433\u043d\u043e\u0437\u0430\r\n$numD=gg(\"ow_setting.forecast_interval\");\r\n$day[0]=\"\u0412\u0421\u041a\";\r\n$day[1]=\"\u041f\u041d\u0414\";\r\n$day[2]=\"\u0412\u0422\u0420\";\r\n$day[3]=\"\u0421\u0420\u0414\";\r\n$day[4]=\"\u0427\u0422\u0412\";\r\n$day[5]=\"\u041f\u0422\u041d\";\r\n$day[6]=\"\u0421\u0411\u0422\";\r\nfor ($i = 1; $i < $numD; $i++) {\r\n $dayNum = date(\"w\", strtotime($date .' +'.$i.' day'));\r\n $name = $day[date(\"w\", strtotime($date .' +'.$i.' day'))];\r\n sg(\"ow_forecast\".$i.\".name\", $name);\r\n }","RUN_PERIODICALLY":"0","RUN_DAYS":"","RUN_TIME":"","AUTO_LINK":"0","LINKED_OBJECT":"","LINKED_PROPERTY":"","CATEGORY_TITLE":"\u0421\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435"}]}